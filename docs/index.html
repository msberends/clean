<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast and Easy Data Cleaning • clean</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Fast and Easy Data Cleaning">
<meta property="og:description" content="Data cleaning functions for classes 'logical',
  'factor', 'numeric', 'character' and 'Date' to make data
  cleaning fast and easy. Relying on very few dependencies, it 
  provides smart guessing, but with user options to override 
  anything if needed.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">clean</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/msberends/clean">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">

<p>% clean</p>
<div id="clean-fast-and-easy-data-cleaning" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#clean-fast-and-easy-data-cleaning" class="anchor"></a><code>clean</code>: Fast and Easy Data Cleaning</h1></div>
<p><a href="https://CRAN.R-project.org/package=clean"><img src="https://www.r-pkg.org/badges/version/clean" alt="CRAN_Badge"></a></p>
<p>The R package for <strong>cleaning and checking data columns</strong> in a fast and easy way. Relying on very few dependencies, it provides <strong>smart guessing</strong>, but with user options to override anything if needed.</p>
<hr>
<p>Contents:</p>
<ul>
<li><a href="#why-this-package">Why this package</a></li>
<li>
<a href="#how-it-works">How it works</a>
<ul>
<li><a href="#cleaning">Cleaning</a></li>
<li><a href="#checking">Checking</a></li>
</ul>
</li>
<li><a href="#speed">Speed</a></li>
<li><a href="#invalid-regular-expressions">Invalid regular expressions</a></li>
</ul>
<hr>
<div id="why-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#why-this-package" class="anchor"></a>Why this package</h2>
<p>As a data scientist, I’m often served with data that is not clean, not tidy and consquently not ready for analysis at all. For tidying data, there’s of course the <code>tidyverse</code> (<a href="https://www.tidyverse.org" class="uri">https://www.tidyverse.org</a>), which lets you manipulate data in any way you can think of. But for <em>cleaning</em>, I think our community was still lacking a neat solution that makes data cleaning fast and easy with functions that kind of ‘think on their own’ to do that.</p>
<p>If the CRAN button at the top of this page is green, install the package with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"clean"</span>)</a></code></pre></div>
<p>Otherwise, or if you are looking for the latest stable development version, install the package with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>) <span class="co"># if you haven't already</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"msberends/clean"</span>)</a></code></pre></div>
</div>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>This package provides two types of functions: <strong>cleaning</strong> and <strong>checking</strong>.</p>
<div id="cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#cleaning" class="anchor"></a>Cleaning</h3>
<p>Use <code><a href="reference/clean.html">clean()</a></code> to clean data. It guesses what kind of data class would best fit your input data. It calls any of the following functions, that can also be used independently. They <strong>always</strong> return the class from the function name (e.g. <code><a href="reference/clean.html">clean_Date()</a></code> always returns class <code>Date</code>).</p>
<ul>
<li>
<p><code><a href="reference/clean.html">clean_logical()</a></code> for values <code>TRUE</code>/<code>FALSE</code>. You only define what should be <code>TRUE</code> or <code>FALSE</code> and it handles the rest for you. At default, it supports “Yes” and “No” in the following languages: Arabic, Bengali, Chinese (Mandarin), Dutch, English, French, German, Hindi, Indonesian, Japanese, Malay, Portuguese, Russian, Spanish, Telugu, Turkish and Urdu. This covers at least two-third of the world population (Ulrich Ammon <em>et al.</em>, University of Düsseldorf).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># English</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Invalid"</span>, <span class="st">"Unknown"</span>))</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1]  TRUE FALSE    NA    NA</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># French</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Oui, c'est ca"</span>, <span class="st">"Non, pas encore"</span>)) </a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; [1]  TRUE FALSE</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co"># Indonesian</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"ya :)"</span>, <span class="st">"tidak :("</span>))</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; [1]  TRUE FALSE</span></a></code></pre></div>
<p>If you define the <code>true</code> and <code>false</code> parameters yourself, they will be interpreted as regular expressions:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Positive"</span>, <span class="st">"Negative"</span>, <span class="st">"Unknown"</span>, <span class="st">"Unknown"</span>),</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">              <span class="dt">true =</span> <span class="st">"pos"</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">              <span class="dt">false =</span> <span class="st">"neg"</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; [1]  TRUE FALSE    NA    NA</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Probable"</span>, <span class="st">"Not probable"</span>),</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">              <span class="dt">true =</span> <span class="st">".*"</span>,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">              <span class="dt">false =</span> <span class="st">"not"</span>)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; [1]  TRUE FALSE</span></a></code></pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_factor()</a></code> for setting and redefining a <code>factor</code>. You can use regular expressions to match values in your data to set new factor levels.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">gender_age &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"male 0-50"</span>, <span class="st">"male 50+"</span>, <span class="st">"female 0-50"</span>, <span class="st">"female 50+"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">gender_age</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; [1] "male 0-50"   "male 50+"    "female 0-50" "female 50+"</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw"><a href="reference/clean.html">clean_factor</a></span>(gender_age, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"M"</span>, <span class="st">"F"</span>))</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; [1] M M F F</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; Levels: M F</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="kw"><a href="reference/clean.html">clean_factor</a></span>(gender_age, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; [1] Male   Male   Female Female</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; Levels: Male Female</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="kw"><a href="reference/clean.html">clean_factor</a></span>(gender_age, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"0-50"</span>, <span class="st">"50+"</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; [1] 0-50 50+  0-50 50+ </span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; Levels: 0-50 &lt; 50+</span></a></code></pre></div>
<p>You can also name your levels to let them match your values. They support regular expressions too:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_factor</a></span>(gender_age, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"female"</span> =<span class="st"> "Group A"</span>, </a>
<a class="sourceLine" id="cb6-2" data-line-number="2">                                    <span class="st">"male 50+"</span> =<span class="st"> "Group B"</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">                                    <span class="st">".*"</span> =<span class="st"> "Other"</span>))</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [1] Other   Group B Group A Group A</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; Levels: Group A Group B Other</span></a></code></pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_Date()</a></code> for any type of dates. This could be dates imported from Excel, or any combination of days, months and years. For convenience, the <code>format</code> parameter understands the date format language of Excel (like <code>d-mmm-yyyy</code>) and transforms it internally to the human-unreadable POSIX standard that R understands (<code>%e-%b-%Y</code>):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"13jul18"</span>, <span class="st">"ddmmmyy"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] "2018-07-13"</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"12 06 2012"</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; Cleaning dates using format 'dd mm yyyy' ('%d %m %Y')</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; [1] "2012-06-12"</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="kw"><a href="reference/clean.html">clean_Date</a></span>(<span class="st">"14 august 2010"</span>)</a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; Cleaning dates using format 'dd mmmm yyyy' ('%d %B %Y')</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; [1] "2010-08-14"</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="kw"><a href="reference/clean.html">clean_Date</a></span>(<span class="dv">38071</span>)</a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; Cleaning dates using Excel format</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; [1] "2004-03-25"</span></a></code></pre></div>
<p>The function to transform <code>d-mmm-yyyy</code> to <code>%e-%b-%Y</code> is available as <code><a href="reference/format_datetime.html">format_datetime()</a></code> to users. This makes it possible to use it in other date functions too:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"12-13-14"</span>, <span class="dt">format =</span> <span class="kw"><a href="reference/format_datetime.html">format_datetime</a></span>(<span class="st">"mm-yy-dd"</span>))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; [1] "2013-12-14"</span></a></code></pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_numeric()</a></code> to remove all non-numbers from cluttered input text:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_numeric</a></span>(<span class="st">"qwerty123456"</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; [1] 123456</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw"><a href="reference/clean.html">clean_numeric</a></span>(<span class="st">"Positive (0.143)"</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; [1] 0.143</span></a></code></pre></div>
</li>
<li>
<p><code><a href="reference/clean.html">clean_character()</a></code> to remove all obvious non-characters from cluttered input text:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"qwerty123456"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; [1] "qwerty"</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"Positive (0.143)"</span>)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; [1] "Positive"</span></a></code></pre></div>
<p>You can define yourself what should be removed, with regular expressions:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Model: Pro A1"</span>,</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">                      <span class="st">"Model specified: Pro A1"</span>,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">                      <span class="st">"Pro A1"</span>), </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">                <span class="dt">remove =</span> <span class="st">"^.*: "</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; [1] "Pro A1" "Pro A1" "Pro A1"</span></a></code></pre></div>
</li>
</ul>
</div>
<div id="checking" class="section level3">
<h3 class="hasAnchor">
<a href="#checking" class="anchor"></a>Checking</h3>
<p>The easiest and most comprehensive way to check the data of a column/variable is to create frequency tables. Use <code><a href="reference/freq.html">freq()</a></code> to do this. It supports a lot of different classes (types of data) and is even extendible by other packages.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="reference/freq.html">freq</a></span>(unclean<span class="op">$</span>gender)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; Frequency table </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; Class:     character</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; Length:    500 (of which NA: 0 = 0.00%)</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; Unique:    5</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; Shortest:  1</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; Longest:   6</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;      Item      Count   Percent   Cum. Count   Cum. Percent</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; ---  -------  ------  --------  -----------  -------------</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; 1    male        240     48.0%          240          48.0%</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; 2    female      220     44.0%          460          92.0%</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; 3    man          22      4.4%          482          96.4%</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; 4    m            15      3.0%          497          99.4%</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; 5    F             3      0.6%          500         100.0%</span></a></code></pre></div>
<p>Clean it and check again:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="reference/freq.html">freq</a></span>(<span class="kw"><a href="reference/clean.html">clean_factor</a></span>(unclean<span class="op">$</span>gender, </a>
<a class="sourceLine" id="cb13-2" data-line-number="2">                  <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"^m"</span> =<span class="st"> "Male"</span>, <span class="st">"^f"</span> =<span class="st"> "Female"</span>)))</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; Frequency table </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; Class:   factor (numeric)</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; Length:  500 (of which NA: 0 = 0.00%)</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; Levels:  2: Male, Female</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; Unique:  2</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;      Item      Count   Percent   Cum. Count   Cum. Percent</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; ---  -------  ------  --------  -----------  -------------</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; 1    Male        277     55.4%          277          55.4%</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; 2    Female      223     44.6%          500         100.0%</span></a></code></pre></div>
<p>This could also have been done with <code>dplyr</code> syntax, since <code><a href="reference/freq.html">freq()</a></code> supports tidy evaluation:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">unclean <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/freq.html">freq</a></span>(<span class="kw"><a href="reference/clean.html">clean_factor</a></span>(gender,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">                    <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"^m"</span> =<span class="st"> "Male"</span>, <span class="st">"^f"</span> =<span class="st"> "Female"</span>)))</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># or:</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">unclean <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="st">  </span><span class="kw">pull</span>(gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/clean.html">clean_factor</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"^m"</span> =<span class="st"> "Male"</span>, <span class="st">"^f"</span> =<span class="st"> "Female"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="reference/freq.html">freq</a></span>()</a></code></pre></div>
</div>
</div>
<div id="speed" class="section level2">
<h2 class="hasAnchor">
<a href="#speed" class="anchor"></a>Speed</h2>
<p>The cleaning functions are tremendously fast, because they rely on R’s own internal C++ libraries:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Create a vector with 500,000 items</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">n &lt;-<span class="st"> </span><span class="dv">500000</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">values &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"yes"</span>, <span class="st">"no"</span>), n, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </a>
<a class="sourceLine" id="cb15-4" data-line-number="4">                 <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/integer">as.integer</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(n, <span class="dv">0</span>, <span class="dv">10000</span>)))</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co"># data looks like:</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">values[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; [1] "no3697"  "yes1906" "yes6738"</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="kw"><a href="reference/clean.html">clean_logical</a></span>(values[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; [1] FALSE  TRUE  TRUE</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(values[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; [1] "no"  "yes" "yes"</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="kw"><a href="reference/clean.html">clean_numeric</a></span>(values[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; [1] 3697 1906 6738</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co"># benchmark the cleaning based on 10 runs and show it in seconds:</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20">microbenchmark<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/microbenchmark/topics/microbenchmark">microbenchmark</a></span>(<span class="dt">logical =</span> <span class="kw"><a href="reference/clean.html">clean_logical</a></span>(values),</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">                               <span class="dt">character =</span> <span class="kw"><a href="reference/clean.html">clean_character</a></span>(values),</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">                               <span class="dt">numeric =</span> <span class="kw"><a href="reference/clean.html">clean_numeric</a></span>(values),</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">                               <span class="dt">times =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb15-24" data-line-number="24">                               <span class="dt">unit =</span> <span class="st">"s"</span>)</a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt; Unit: seconds</span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt; expr            min        lq      mean    median        uq       max neval</span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">#&gt; logical   0.2846163 0.2925479 0.3076008 0.3100244 0.3189712 0.3269428    10</span></a>
<a class="sourceLine" id="cb15-28" data-line-number="28"><span class="co">#&gt; character 0.4522698 0.4593437 0.4734631 0.4636837 0.4888959 0.5303473    10</span></a>
<a class="sourceLine" id="cb15-29" data-line-number="29"><span class="co">#&gt; numeric   0.6428362 0.6476207 0.6618845 0.6542312 0.6778215 0.6897005    10</span></a></code></pre></div>
<p>Cleaning 500,000 values (!) only takes 0.3-0.6 seconds on our system.</p>
</div>
<div id="invalid-regular-expressions" class="section level2">
<h2 class="hasAnchor">
<a href="#invalid-regular-expressions" class="anchor"></a>Invalid regular expressions</h2>
<p>If invalid regular expressions are used, the cleaning functions will not throw errors, but instead will show a warning and will interpret the expression as a fixed value:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test0123"</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt; [1] "test"</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test0123"</span>, <span class="dt">remove =</span> <span class="st">"[a-g0-9]"</span>)</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; [1] "tst"</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="kw"><a href="reference/clean.html">clean_character</a></span>(<span class="st">"0123test0123"</span>, <span class="dt">remove =</span> <span class="st">"[a-g"</span>)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; [1] "0123test0123"</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; Warning message:</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; invalid regular expression '[a-g', reason 'Missing ']'' - now interpreting as fixed value </span></a></code></pre></div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/msberends/clean">https://​github.com/​msberends/​clean</a>
</li>
<li>Report a bug at <br><a href="https://github.com/msberends/clean/issues">https://​github.com/​msberends/​clean/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matthijs S. Berends <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7620-1800" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Matthijs S. Berends.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
